============================================================================================================================================================================================================
============================================================================================================================================================================================================
SINGLE ACQUISITION

Session initilization

establish connection
acquisition type --> trigger type?


channels = [0,1] -->  input list
niscope.session.configure_vertical
    range/coupling/offset/probe/enabled input dictionary "vertical_conf"
niscope.session.configure_horizontal_timing
    num_records/sample_rate/min_record_lenght/ref_pos input dictionary "horizontal_conf"

Trigger configuration
 holdoff/delay/coupling inut dictionary "trigger_conf"
 if trigger[type]=='...' do 

Declare Waveform  arrays --> 
    This array allocates space for the data that is acquired with a Fetch function
    NI-SCOPE coerces up the min record length specified with the Configure Horizontal Timing function. 
    You can retrieve the actual number of samples acquired by the digitizer by calling niScope Actual Record Length.

-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -

MULTIPLE ACQUISITION

Session initilization

establish connection
acquisition type --> trigger type?


channels = [0,1] -->  input list
niscope.session.configure_vertical
    range/coupling/offset/probe/enabled input dictionary "vertical_conf"
niscope.session.configure_horizontal_timing
    num_records/sample_rate/min_record_lenght/ref_pos input dictionary "horizontal_conf"

Trigger configuration
 holdoff/delay/coupling inut dictionary "trigger_conf"
 if trigger[type]=='...' do 

Declare Waveform  arrays --> 
    This array allocates space for the data that is acquired with a Fetch function
    NI-SCOPE coerces up the min record length specified with the Configure Horizontal Timing function. 
    You can retrieve the actual number of samples acquired by the digitizer by calling niScope Actual Record Length.

____________________________________________________________________________________________________________________________________________________________________________________________________________

Configuring Different Parameters

1. Set acquisition type
2. Set vertical settings
3. Set horizontal settings
4. Set triggers configuration


1. Acquisition type (single/continuous?)

NI digitizers support different acquisition types. You set the acquisition type with the niScope Configure Acquisition VI or the niScope_ConfigureAcquisition function. The different acquisition types 
change the processing of the data that is returned. In conventional (or normal) mode, the digitizer acts like a traditional instrument, measuring voltage waveforms.
In PXI/PCI‑5922 flexible resolution mode, the digitizer uses an advanced averaging algorithm to increase the resolution of data at lower sample rates.

2. Vertical settings

Both Configure Vertical and Configure Chan Characteristics affect settings that may be different for each channel. Therefore, if you have a two-channel digitizer, 
you can call each of these functions twice, changing the channel name parameter between 0 and 1. If you want to set these parameters to the same value for multiple channels, 
use a channel list such as 0,1.
With the Configure Vertical function, you can adjust the vertical range, vertical offset, vertical coupling, and the probe attenuation parameters.
With the Configure Chan Characteristics function, you can adjust the input impedance and the and the max input frequency parameters.

    CONFIGURE_VERTICAL --> directly in session instance definition
    niscope.Session.configure_vertical(range, coupling, offset=0.0, probe_attenuation=1.0, enabled=True)
    Configures the most commonly configured properties of the digitizer vertical subsystem, such as the range, offset, coupling, probe attenuation, and the channel.

    Parameters:

    range (float) – Specifies the vertical range Refer to niscope.Session.vertical_range for more information. 
        Specifies the absolute value of the input range for a channel in volts. For example, to acquire a sine wave that spans between -5 and +5 V,
        set this property to 10.0 V. Refer to the NI High-Speed Digitizers Help for a list of supported vertical ranges for each device.
        If the specified range is not supported by a device, the value is coerced up to the next valid range.

    coupling (niscope.VerticalCoupling) – Specifies how to couple the input signal. Refer to niscope.Session.vertical_coupling for more information.
        Specifies how the digitizer couples the input signal for the channel. When input coupling changes, the input stage takes a finite amount of time to settle.

    offset (float) – Specifies the vertical offset. Refer to niscope.Session.vertical_offset for more information.
        Specifies the location of the center of the range. The value is with respect to ground and is in volts. For example, to acquire a sine wave that spans between 0.0 and 10.0 V, set this property to 5.0 V.

    probe_attenuation (float) – Specifies the probe attenuation. Refer to niscope.Session.probe_attenuation for valid values.
        Specifies the probe attenuation for the input channel. For example, for a 10:1 probe, set this property to 10.0. Valid Values: Any positive real number. Typical values are 1, 10, and 100.

    enabled (bool) – Specifies whether the channel is enabled for acquisition. Refer to niscope.Session.channel_enabled for more information.


    CONFIGURE CHAN CHARACTERISTICS --> directly in session instance definition
    Configures the properties that control the electrical characteristics of the channel—the input impedance and the bandwidth.

    Parameters:
        input_impedance (float) – The input impedance for the channel; NI-SCOPE sets niscope.Session.input_impedance to this value.

        max_input_frequency (float) – The bandwidth for the channel; NI-SCOPE sets niscope.Session.max_input_frequency to this value. Pass 0 for this value to use the hardware default bandwidth. Pass –1 for this value to achieve full bandwidth.

3. Horizontal settings

    Num Records
        The num records parameter in the Configure Horizontal Timing function allows you to configure a multirecord acquisition. For a single record acquisition, set this parameter to 1.
        I am assuming every records contains a certain number of points...how to set?

    Sample Rate
        The sample rate parameter is the frequency at which digitized samples are stored, expressed in samples per second.
        This parameter is rounded up to the next legal sampling rate that your device supports. If the enforce realtime parameter is set to TRUE,
        the sampling rate must be set lower than the maximum real-time sampling rate of the digitizer, so data can be digitized at the requested rate.
        If you set the enforce realtime parameter to FALSE, NI-SCOPE allows you to specify sampling rates higher than the maximum real-time sampling rate of the digitizer.
        When you do this, NI-SCOPE enters random interleaved sampling (RIS) mode, where it acquires multiple waveforms at the maximum real-time sampling rate and reconstructs a periodic waveform.

    Min Record Length
        The min record length parameter is the minimum number of samples to store for each record in the acquisition. 
        This parameter can also be rounded up. NI-SCOPE maintains a constant time per record, which is the min record length divided by the requested sampling rate. 
        Because the sampling rate is rounded up to a legal value, the min record length can also be rounded up. You can fetch this resulting actual record length by calling Actual Record Length. 
        Similarly, you can call Sample Rate to find the true sample rate used or Actual Sample Mode to determine if NI-SCOPE is using RIS or real-time sampling.

    Reference Position
        The reference position parameter determines the number of pretrigger versus posttrigger points that are stored. Reference position is expressed as a percent of the record,
        from 0 to 100. For example, a 0% reference position means that you have the actual record length points stored after the trigger occurs, 
        while 100% reference position means that all the samples are stored before the trigger.

4. Configuring triggers

    Immediate
    Immediate triggers occur when the digitizer triggers itself. There is no external signal that triggers the acquisition—the acquisition
    simply begins immediately after being configured by the driver software. Immediate triggering is the default option on NI high-speed digitizers.
    Therefore, you can omit using this function if you never change triggering modes.

    Software
    Software triggers occur when a software command starts the acquisition of posttrigger data. When you call Initiate Acquisition the digitizer starts acquiring pretrigger
    data and continues to do so until you call Send SW Trigger. The digitizer continues to store posttrigger samples after the software trigger, so you still need
    to wait for the acquisition to complete after the trigger. You can do this by setting the timeout parameter in a Fetch function to a positive value.
    You cannot use a Read function in conjunction with software triggering; you must use Initiate Acquisition followed by one of the Fetch functions. 
    The following figure shows the programming flow using software trigger functions.

    Edge
    An edge trigger occurs when a signal crosses a trigger threshold that you specify.
    You can specify the slope as either positive (on the rising edge) or negative (on the falling edge) to the trigger. 
    Edge triggering is possible on all analog trigger channels, such as 0, 1, or the external trigger channel.

    Window
    A window trigger occurs when a signal either enters or leaves a window you specify with the window mode parameters in the Configure 
    Trigger Window function. Window triggering is possible on all analog trigger channels, such as 0, 1, or the external trigger input.

    PROPERTIES

    HOLDOFF -  Trigger holdoff is an adjustable period of time during which the digitizer cannot trigger. 
               NI high-speed digitizers use trigger holdoff to guarantee a minimum time between two Reference Triggers. 
               This feature is useful if incoming triggers are a known time apart and only a relatively small window of samples adjacent to the trigger are necessary. 
               In this case, setting the holdoff allows you to efficiently allocate the onboard memory, and prevents the device from triggering on sections of the input waveform that are not of interest. 
               Each device uses an onboard counter that is programmed by software to implement this functionality. While the holdoff counter is decrementing, incoming Reference Triggers are ignored. 
               The device arms itself for the next Reference Trigger when the holdoff counter reaches zero. Each device that supports trigger holdoff has a minimum holdoff value, 
               which is listed in the specifications document for each device.

    DELAY - Trigger delay is the amount of time that elapses between when a trigger occurs and when the digitizer actually triggers.

    COUPLING - The trigger coupling parameter can be either AC, DC, HF Reject, LF Reject, or AC Plus HF Reject. 
               This parameter works much like the vertical coupling parameter. When AC is selected, NI-SCOPE rejects the DC component of the trigger signal. 
               When triggering on channel 0 or channel 1 of the digitizer, the input signal is immediately coupled based on the vertical coupling parameter. 
               Therefore, if the vertical coupling parameter is set to AC coupling, triggering occurs on the AC components of the signal because the DC component has already been removed.

____________________________________________________________________________________________________________________________________________________________________________________________________________

WAVEFORMS

Declare waveform arrays --> This array allocates space for the data that is acquired with a Fetch function
                            NI-SCOPE coerces up the min record length specified with the Configure Horizontal Timing function. 
                            You can retrieve the actual number of samples acquired by the digitizer by calling niScope Actual Record Length.

numWaveforms = NR x NC x AT where NR is the number of records, NC is the number of channels, and AT is the number of waveforms for the current acquisition type. AT is equal to 1
The waveform array is a single dimension array with a size equal to the number of waveforms to fetch times the number of points to fetch in each waveform
============================================================================================================================================================================================================
============================================================================================================================================================================================================
ACQUISITION

1. Start acquisition
2. Sleep --> wait for data acquisition to complete
3. Retrieve data

...New record --> Pretrigger --> Triggers --> Post triggers --> New record...

Initiate Acquisition tells the digitizer to start acquiring data. 
During this function, the hardware is programmed with the configuration that you have chosen, and the digitizer begins sampling data and storing it to onboard memory. 
First, the digitizer samples the requested number of pretrigger points, ignoring any triggers that may occur. 
After the requested number of pretrigger points are stored, the digitizer waits for a trigger. While waiting, it continues to sample and store data into the circular, onboard memory. 
The trigger signals the digitizer to sample the exact number of posttrigger samples that you requested. After the posttrigger points are stored, the digitizer either stops sampling data or 
restarts this process for the next record. 
The digitizer stores the memory location of the first posttrigger sample, which allows it to calculate where the first pretrigger sample is located in memory when you fetch the waveform.
____________________________________________________________________________________________________________________________________________________________________________________________________________

After the acquisition is initiated, you typically use a Fetch function with a positive timeout parameter to sleep while the digitizer acquires the data. 
The Fetch function polls the digitizer while waiting for the data to be acquired, and it returns the requested data when the data is available. 
If the data is not acquired within the time specified with the timeout parameter, NI-SCOPE returns an error.

The Fetch functions all take a comma-delimited list of channels to fetch, and the number of samples (numSamples) to fetch for each waveform that is returned.
If the acquisition finishes and the specified numSamples have not been acquired, the Fetch functions return all the available data.
The waveformInfo output lists the actual number of samples fetched.
In C and Visual Basic, there is a pointer to a one-dimensional array that contains all the waveforms sequentially, where the first waveform starts at the zeroth index, 
the second waveform starts at the numSamples index, the third waveform starts at two times the numSamples index, and so on.

The order of the returned data follows these rules:

If the acquisition type returns two waveforms, they are directly next to each other.
If multiple channels are specified, the channel's data is returned in the order of the list.
If multiple records are specified, all Record 0 waveforms are returned before any Record 1 waveforms.
============================================================================================================================================================================================================
============================================================================================================================================================================================================

CLOSE SESSION





















